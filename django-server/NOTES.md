# Notes

## Testing
Tests in django are executed with `manage.py test` command. This performs a process that is roughly:
- finds subclasses of `django.test.TestCase` to create a test suite
    - looks for test methods
- creates a test database, using the DB settings in `settings.py` (i.e. creates a test database in the configured server)

Sources:
- https://docs.djangoproject.com/en/5.1/intro/tutorial05/ 
- https://docs.djangoproject.com/en/5.1/topics/testing/overview/

There's an integration to run tests with pytest, giving tools such as fixtures and so forth - `pytest-django`. A blog post on this topic - https://djangostars.com/blog/django-pytest-testing/

Configuration:
- pytest needs a `pytest.ini` configured in a way that it can find the `settings` module (i.e. `settings.py` of the django project).
- using django's TestCase needs extra pytest config to inject fixtures that is less readable than simply using `@pytest.mark.django_db` for each test case that needs a DB. If test grouping is wanted, then a simple class (with no `TestCase` mixin) can be used

**TODOs**
- run integration tests with pytest. These tests should not belong to the `polls` app as integration tests are of the domain/service itself
and not just of the `polls` app
    - the tests should cover the simple API
- What would be needed to run tests with django's `TestCase` and pytest? register findings

## Django Database ORM

### Foreign Key contraint names
When using `models.ForeignKey`, the constraint name generated by django contains some kind of hash:

`polls_choice_question_id_c5b4b260_fk_polls_question_id` 

No clue on what `c5b4b260` is supposed to be.

https://docs.djangoproject.com/en/5.1/ref/models/fields/#django.db.models.ForeignKey says nothing about it.

The only thing I found out while searching for a way to control this naming was (however not useful):
https://stackoverflow.com/questions/66144560/django-mssql-override-foreign-key-constraint-name-generation